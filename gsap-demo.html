<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sun Marker Test - Spacetime Clock</title>
    <script src="node_modules/gsap/dist/gsap.min.js"></script>
    <style>
        :root {
            --foreground: 34deg, 73%, 90%;
            --background: 264deg, 100%, 1%;
            --daytime: 39deg, 100%, 50%;
            --nighttime: 51deg, 91%, 4%;
            --sun: 310deg, 100%, 50%;
        }
        
        body {
            background: hsla(var(--background));
            color: hsla(var(--foreground));
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            font-family: system-ui, -apple-system, sans-serif;
        }
        
        .title {
            font-size: 32px;
            margin-bottom: 32px;
            color: hsla(var(--foreground));
        }
        
        .timedonut {
            background: radial-gradient(hsla(var(--background)) 40%, transparent 41%),
                conic-gradient(
                    hsla(var(--daytime)) 0% 270deg,
                    hsla(var(--nighttime)) 270deg 90deg,
                    hsla(var(--daytime)) 90deg 100%
                );
            margin: 10px;
            display: inline-block;
            border-radius: 50%;
            width: 384px;
            height: 384px;
            position: relative;
        }
        
        .circular-progress-time {
            position: absolute;
            width: 100%;
            height: 100%;
        }
        
        .circular-progress-time circle {
            cx: 50%;
            cy: 50%;
            r: calc((100% - 33px) / 2);
            stroke-width: 33px;
            fill: none;
        }
        
        .circular-progress-time circle.bg {
            stroke: hsla(var(--background));
        }
        
        .circular-progress-time circle.sun-marker {
            r: 16px;
            fill: hsla(var(--sun));
            stroke: none;
        }
        
        .donut-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 48px;
            font-weight: 100;
        }
        
        .info {
            margin-top: 24px;
            font-size: 18px;
            color: hsla(var(--foreground));
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="title">Sun Marker - Circle Position Indicator</div>
    <div class="timedonut">
        <svg class="circular-progress-time">
            <circle class="bg"></circle>
            <circle class="sun-marker" id="sunMarker"></circle>
        </svg>
        <div class="donut-content" id="timeValue">90.00</div>
    </div>
    <div class="info">
        ✅ Sun marker as a circle (not an arc)<br>
        ✅ Positioned at current time degree<br>
        ✅ Top dead center = 0 (midnight)
    </div>
    
    <script>
        const sunMarker = document.getElementById('sunMarker');
        const timeValue = document.getElementById('timeValue');
        
        const timeSvg = sunMarker.closest('svg');
        const timeSize = timeSvg.clientWidth || 384;
        const timeRadius = (timeSize - 33) / 2;
        
        let time360 = 25; // Start at about 1 AM (25 degrees)
        
        function updateSunMarker() {
            // Calculate position
            const angle = (time360 - 90) * (Math.PI / 180); // -90 for top dead center
            const markerRadius = timeRadius + (33 / 2); // Middle of the stroke
            const centerX = timeSize / 2;
            const centerY = timeSize / 2;
            const markerX = centerX + markerRadius * Math.cos(angle);
            const markerY = centerY + markerRadius * Math.sin(angle);
            
            gsap.to(sunMarker, {
                attr: {
                    "cx": markerX,
                    "cy": markerY
                },
                duration: 0.3,
                ease: "linear"
            });
            
            timeValue.textContent = time360.toFixed(2);
        }
        
        // Initial update
        setTimeout(updateSunMarker, 100);
        
        // Animate the marker around the circle
        setInterval(() => {
            time360 = (time360 + 1) % 360;
            updateSunMarker();
        }, 50);
    </script>
</body>
</html>
